<DOCTYPE! html>
<html>
<head>
  <title>
    G a m e y e e
  </title>
  <style>
  * {
				padding: 0;
				margin: 0;
			}
			body {
				overflow: hidden;
			}
			canvas {
				background: url('http://wisen.space/capture/load/5-XO21O-HWAmE_51AlMuoX4u.jpg') no-repeat center center fixed;
				background-size: 100vw 100vh;
			}

#chat{
  position: fixed;
  left: 3vw;
  bottom: 3vh;
}
[type='text']{
    background-color: transparent;
}
#chat ul > li {
  list-style-type:none;
}
#chat strong {
  text-transform: uppercase;
}

  </style>
</head>
<body>
  <div id='chat'>
    <ul>
    </ul>
    <div>
      <input type='text'>
    </div>
  </div>
  <canvas>
  </canvas>
  <script src='/js/socket.io.js'>
  </script>
  <script>
  var $canvas=document.querySelector('canvas');
  $canvas.width=window.screen.width;
  $canvas.height=window.screen.height;
  var user = '{{USERNAME}}';
  var socket=io({query: {user: user}});
  var $input=document.querySelector('input');
  document.body.addEventListener('keypress', submitMessage);
  function submitMessage(e){
    if(e.key!=='Enter')return;
    if(document.activeElement.tagName !== 'INPUT' ) return;
    if($input.value === '') return;
    socket.emit('message', {username: user, message: $input.value});
    $input.value= '';
  }
  socket.on('newMessage', function(message){
    var $ul = document.querySelector('#chat ul'); 
    var $li = document.createElement('li'); 
    $li.innerHTML = `<strong>${message.username}:</strong> ${message.message}`; 
    $ul.appendChild($li)
  })

  </script>
</body>
</html>
